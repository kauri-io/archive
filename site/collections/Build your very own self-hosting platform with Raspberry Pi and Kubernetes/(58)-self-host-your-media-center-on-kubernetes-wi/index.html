<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <title>(5/8) Self-host your Media Center On Kubernetes with Plex, Sonarr, Radarr, Transmission and Jackett &mdash; archive.kauri.io</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css">
    <link rel="stylesheet" href="../../../css/theme.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <link rel="stylesheet" href="../../../css/extra.css">
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/solidity.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/rust.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script> 
</head>

<body ontouchstart="">
    <div id="container">
        <aside>
            <div class="home">
                <div class="title">
                    <button class="hamburger"></button>
                    <a href="../../.." class="site-name"> archive.kauri.io</a>
                </div>
                <div class="search">
                    <div role="search">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
        <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
    </form>
</div>
                </div>
            </div>
            <nav class="nav">
                <ul class="root">
                    <li class="toctree-l1"><a class="nav-item" href="../../..">Home</a></li>
                    <li class="toctree-l1"><button class="section nav-item">Communities</button>
<ul class="subnav">
    <li class="toctree-l2"><button class="section nav-item hide">Getting started with dapp development</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/tips-for-starting-dapp-development/">Tips for Starting Dapp Development</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/an-introduction-to-solidity-for-experienced-devel/">An Introduction to Solidity for Experienced Developers</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/truffle--adding-a-frontend-with-react-box/">Truffle  Adding a frontend with react box</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/truffle--testing-your-smart-contract/">Truffle  Testing your smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/truffle--smart-contract-compilation-and-deploymen/">Truffle  Smart Contract Compilation & Deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/understanding-smart-contract-compilation-and-depl/">Understanding smart contract compilation and deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/tools-for-dapp-development/">Tools for dApp development</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/full-stack-dapp-tutorial-series-intro/">Full Stack dApp Tutorial Series - Intro</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/erc-721-non-fungible-token-standard/">ERC-721 Non-Fungible Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/create-a-%22hello-world%22-fullstack-dapp/">Create a "Hello World" fullstack dapp</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/a-fullstack-dapp-for-creating-tokens/">A fullstack dapp for creating tokens</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/a-fullstack-dapp-for-creating-unique-tradable-tok/">A fullstack dapp for creating unique tradable tokens</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/blockchain-explained/">Blockchain Explained</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/remix-ide-your-first-smart-contract/">Remix IDE - Your first smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/an-introduction-to-smart-contracts-with-solidity/">An Introduction to Smart Contracts with Solidity</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Java Ethereum</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/how-to-test-ethereum-smart-contracts-from-java/">How to test Ethereum smart contracts from Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/web3j-transaction-managers/">Web3j Transaction Managers</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/manage-erc20-tokens-in-java-with-web3j/">Manage ERC20 tokens in Java with Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/running-a-pantheon-node-in-java-integration-tests/">Running a Pantheon Node in Java Integration Tests</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/managing-storage-in-a-java-application-with-ipfs/">Managing storage in a Java application with IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/using-besu-the-java-ethereum-client-with-linuxmac/">Using Besu, the Java Ethereum Client with Linux/MacOS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/listening-for-ethereum-smart-contract-events-in-j/">Listening for Ethereum Smart Contract Events in Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/interacting-with-an-ethereum-smart-contract-in-ja/">Interacting with an Ethereum Smart Contract in Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/generate-a-java-wrapper-from-your-smart-contract/">Generate a Java Wrapper from your Smart Contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/manage-an-ethereum-account-with-java-and-web3j/">Manage an Ethereum account with Java and Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/connecting-to-an-ethereum-client-with-java-eclips/">Connecting to an Ethereum client with Java, Eclipse and Web3j</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Ethereum Node Runners</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/run-an-ethereum-node-on-debian-with-an-external-s/">Run an Ethereum node on Debian with an External SSD (Mar 2020)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/ethereum-on-arm.-turn-your-arm-device-into-a-full/">Ethereum on ARM. Turn your ARM device into a full Ethereum node just by flashing a MicroSD card</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/make-use-of-your-remote-ethereum-node-using-an-ss/">Make use of your remote Ethereum node using an SSH tunnel and MetaMask</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/how-to-install-and-synchronize-your-own-remote-et/">How to install and synchronize your own remote Ethereum node</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/how-to-set-up-a-simple-linux-firewall/">How to set up a simple Linux firewall</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/supported-hardware-to-run-an-ethereum-node/">Supported hardware to run an Ethereum node</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/monitor-your-geth-node-with-google-sheet/">Monitor your Geth node with Google Sheet</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/running-an-ethereum-full-node-on-a-raspberrypi-4-/">Running an Ethereum Full Node on a RaspberryPi 4 (model B)</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">IPFS</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/building-a-twitter-bot-using-ipfs-cluster/">Building a Twitter Bot using IPFS Cluster ðŸ¤–</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/hands-on-ipld-tutorial-in-golang--part-2/">Hands-on IPLD Tutorial in Golang  PART 2</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/understanding-ipfs-in-depth%2826%29--what-is-interpla/">Understanding IPFS in Depth(2/6)  What is InterPlanetary Linked Data(IPLD)?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/hands-on-ipld-tutorial-in-golang/">Hands-on IPLD Tutorial in Golang</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/understanding-ipfs-in-depth%2816%29--a-beginner-to-ad/">Understanding IPFS in Depth(1/6)  A Beginner to Advanced Guide</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/orbitdb--serverless-distributed-peer-to-peer-data/">OrbitDB  Serverless, Distributed, Peer-to-Peer Database</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/getting-started-with-mahuta-a-search-engine-for-t/">Getting started with Mahuta - A Search engine for the IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/peer-to-peer-hypermedia-with-ipfs/">Peer-to-peer hypermedia with IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/installing-ipfs/">Installing IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/improving-ipfs-decentralization-introducing-ahken/">Improving IPFS Decentralization - Introducing Ahken</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/managing-storage-in-a-java-application-with-ipfs/">Managing storage in a Java application with IPFS</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Documentation and technical communication</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Documentation%20and%20technical%20communication/why-do-people-write/">Why do people write?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Documentation%20and%20technical%20communication/language-and-understandable-writing/">Language and understandable writing</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Documentation%20and%20technical%20communication/documentation-structure/">Documentation structure</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Documentation%20and%20technical%20communication/why-write-documentation/">Why write documentation</a></li>
</ul></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Collections</button>
<ul class="subnav">
    <li class="toctree-l2"><button class="section nav-item hide">A Deep Dive Into The Ethereum Virtual Machine (EVM) Series</button>
<ul class="subnav hide">
    <li class="toctree-l3">
<a class="nav-item" href="../../A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-%28ev/">A Deep Dive into the Ethereum Virtual Machine (EVM) - part 1  Introduction</a></li>
    <li class="toctree-l3">
<a class="nav-item" href="../../A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-%28ev/">A Deep Dive into the Ethereum Virtual Machine (EVM) - part 2  Memory and Storage</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-%28ev/">A Deep Dive into the Ethereum Virtual Machine (EVM) - Part 3  Execution Model of the EVM</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-par/">A Deep Dive into the Ethereum Virtual Machine - Part 4  The EVM and High-Level Programming Languages</a></li>
</ul></li>
    <li class="toctree-l2 current"><button class="section nav-item">Build your very own self-hosting platform with Raspberry Pi and Kubernetes</button>
<ul class="subnav">
    <li class="toctree-l3"><a class="nav-item" href="../%2818%29-build-your-very-own-self-hosting-platform-wi/">(1/8) Build your very own self-hosting platform with Raspberry Pi and Kubernetes - Introduction</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../%2828%29-install-raspbian-operating-system-and-prepar/">(2/8) Install Raspbian Operating-System and prepare the system for Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../%2838%29-install-and-configure-a-kubernetes-cluster-w/">(3/8) Install and configure a Kubernetes cluster with k3s to self-host applications</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../%2848%29-deploy-nextcloud-on-kuberbetes--the-self-hos/">(4/8) Deploy NextCloud on Kuberbetes  The self-hosted Dropbox</a></li>
    <li class="toctree-l3 current"><a class="nav-item current" href="./">(5/8) Self-host your Media Center On Kubernetes with Plex, Sonarr, Radarr, Transmission and Jackett</a>
<ul class="subnav">
<li class="toctree-l4"><a class="nav-item toc" href="#this-article-is-part-of-the-series-build-your-very-own-self-hosting-platform-with-raspberry-pi-and-kubernetes">This article is part of the series Build your very own self-hosting platform with Raspberry Pi and Kubernetes</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#namespace">Namespace</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#persistence">Persistence</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#ingress">Ingress</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#heml-repository-add-bananaspliff">Heml Repository - add Bananaspliff</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#bittorrent-client-transmission-over-vpn">BitTorrent client - Transmission over VPN</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#torrent-providers-aggregator-jackett-over-vpn">Torrent Providers Aggregator- Jackett over VPN</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#tv-show-library-management-sonarr">TV Show Library Management - Sonarr</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#movie-library-management-radarr">Movie Library Management - Radarr</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#media-server-plex">Media Server - Plex</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#conclusion">Conclusion</a></li>
</ul></li>
    <li class="toctree-l3"><a class="nav-item" href="../%2868%29-self-host-pi-hole-on-kubernetes-and-block-ad/">(6/8) Self-host Pi-Hole on Kubernetes and block ads and trackers at the network level</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../%2878%29-self-host-your-password-manager-with-bitward/">(7/8) Self-host your password manager with Bitwarden</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../%2888%29-deploy-prometheus-and-grafana-to-monitor-a-k/">(8/8) Deploy Prometheus and Grafana to monitor a Kubernetes cluster</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">A Hackathon Survival Guide</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/the-hack%21-what-is-a-hackathon/">The Hack?!? What is a hackathon?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/create-a-%22hello-world%22-fullstack-dapp/">Create a "Hello World" fullstack dapp</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/full-stack-dapp-tutorial-series-intro/">Full Stack dApp Tutorial Series - Intro</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/ethereum-101-part-1-what-is-ethereum/">Ethereum 101 - Part 1 - What is Ethereum?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/remix-ide-your-first-smart-contract/">Remix IDE - Your first smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/interacting-with-an-ethereum-smart-contract-in-ja/">Interacting with an Ethereum Smart Contract in Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/a-.net-developer-s-workflow-for-creating-and-call/">AÂ .NET Developerâ€™s Workflow for Creating and Calling Ethereum Smart Contracts</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/sending-ethereum-transactions-with-rust/">Sending Ethereum Transactions with Rust</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/generate-a-java-wrapper-from-your-smart-contract/">Generate a Java Wrapper from your Smart Contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/accelerating-dapp-development-with-ethers.js/">Accelerating DApp Development with Ethers.js</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/nethereum-an-open-source-.net-integration-library/">Nethereum - An open source .NET integration library for blockchain</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/creating-a-dapp-in-go-with-geth/">Creating a DApp in Go with Geth</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/tools-for-dapp-development/">Tools for dApp development</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/ethasketch/">EthASketch</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/bountibot--rewarding-github-pull-requests-for-you/">Bountibot  rewarding GitHub Pull Requests for you and the rest of the OSS community</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/eth-dev-tools/">ETH Dev Tools</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Web3j Cheat Sheet (Java Ethereum)</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/retrieving-an-ethereum-account-balance-in-web3j/">Retrieving an Ethereum Account Balance in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/converting-between-ether-units-denominations-in-w/">Converting Between Ether Units / Denominations in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/creating-a-web3j-wallet-from-a-mnemonic-code-%28see/">Creating a Web3j Wallet from a Mnemonic Code (Seed Phrase)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/sending-an-ether-transfer-transaction-from-one-ac/">Sending an Ether Transfer Transaction from One Account to Another in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/signing-an-ethereum-transaction-in-web3j/">Signing an Ethereum Transaction in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/signing-data-in-java-and-web3j/">Signing Data in Java and Web3j</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">OpenZeppelin</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../OpenZeppelin/openzeppelin-part-1--introductory/">OpenZeppelin Part 1  Introductory</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../OpenZeppelin/openzeppelin-part-2--access-control/">OpenZeppelin Part 2  Access Control</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../OpenZeppelin/openzeppelin-part-3--token-standards/">OpenZeppelin Part 3  Token Standards</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../OpenZeppelin/openzeppelin-part-4--crowdsales/">OpenZeppelin Part 4  Crowdsales</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">A non practitioner guide to machine learning</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../A%20non%20practitioner%20guide%20to%20machine%20learning%20/getting-started-with-machine-learning-%28non-practi/">Getting Started With Machine Learning (Non practitioner guide)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20non%20practitioner%20guide%20to%20machine%20learning%20/installing-anaconda-python3-and-tensorflow/">Installing Anaconda, Python3 and Tensorflow</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20non%20practitioner%20guide%20to%20machine%20learning%20/regression-with-python-keras-and-tensorflow/">Regression with Python, Keras and Tensorflow</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20non%20practitioner%20guide%20to%20machine%20learning%20/predict-cryptocurrency-prices-with-tensorflow-as-/">Predict cryptocurrency prices with Tensorflow as binary classification problem</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20non%20practitioner%20guide%20to%20machine%20learning%20/multi-class-classification-example-with-convoluti/">Multi-class classification example with Convolutional Neural Network in Keras and Tensorflow</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">An ethereum test toolkit in Go</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../An%20ethereum%20test%20toolkit%20in%20Go/sending-transactions-on-geth-s-simulated-backend/">Sending Transactions on GETH's Simulated Backend</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../An%20ethereum%20test%20toolkit%20in%20Go/interacting-with-smart-contracts-from-geth-s-simu/">Interacting with smart contracts from GETH's Simulated Backend</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../An%20ethereum%20test%20toolkit%20in%20Go/generating-a-load-of-keys-for-testing-in-go/">Generating a load of keys for testing in Go</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../An%20ethereum%20test%20toolkit%20in%20Go/the-geth-simulated-backend/">The GETH Simulated Backend</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Monitoring Kubernetes with Elastic Stack</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2815%29-getting-started-with-elastic-stack-for-monit/">(1/5) Getting started with Elastic Stack for monitoring on Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2825%29-install-elasticsearch-and-kibana-to-store-an/">(2/5) Install ElasticSearch and Kibana to store and visualize monitoring data</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2835%29-collect-metrics-with-elastic-metricbeat-for-/">(3/5) Collect metrics with Elastic Metricbeat for monitoring Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2845%29-collect-logs-with-elastic-filebeat-for-monit/">(4/5) Collect logs with Elastic Filebeat for monitoring Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2855%29-collect-traces-with-elastic-apm-for-monitori/">(5/5) Collect traces with Elastic APM for monitoring Kubernetes</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Founder interviews</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Founder%20interviews/fluree--blockchain-graphql-and-more-all-in-one-da/">Fluree  Blockchain, GraphQL, and more all in one database</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Founder%20interviews/true-anonymity-privacy-and-snapps-with-simon-harm/">True anonymity, privacy, and SNApps with Simon Harman of Loki</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Founder%20interviews/the-aeternity-blockchain-with-emil-wagner/">The Ã†ternity blockchain with Emil Wagner</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Founder%20interviews/embleema--the-blockchain-that-lets-you-own-your-h/">Embleema  The Blockchain That Lets You Own Your Health Data</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Vyper Full Stack dApp Tutorial Series</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/remix-ide-your-first-vyper-smart-contract/">Remix IDE - Your first Vyper smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/understanding-smart-contract-compilation-and-depl/">Understanding smart contract compilation and deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/truffle--smart-contract-compilation-and-deploymen/">Truffle  Smart Contract Compilation & Deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/truffle--testing-your-smart-contract/">Truffle  Testing your smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/tools-for-working-with-vyper/">Tools for working with Vyper</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Flexible, Upgradeable & Highly Available NFTs</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Flexible%2C%20Upgradeable%20%26%20Highly%20Available%20NFTs/creating-a-flexible-nft-%28part-1%29/">Creating a Flexible NFT (Part 1)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Flexible%2C%20Upgradeable%20%26%20Highly%20Available%20NFTs/creating-a-flexible-nft-%28part-2%29/">Creating a Flexible NFT (Part 2)</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Libra</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Libra/building-and-working-with-facebook-s-cryptocurren/">Building and Working with Facebookâ€™s Cryptocurrency Libra</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Libra/whitepaper-deep-dive-move--facebook-libra-blockch/">Whitepaper Deep Diveâ€Šâ€”â€ŠMove  Facebook Libra Blockchainâ€™s New Programming Language</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Libra/quick-dive-into-the-move-programming-language/">Quick Dive into the Move Programming Language</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Bitcoin</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Bitcoin/bitcoin-blockchain-overview/">Bitcoin Blockchain Overview</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Bitcoin/creating-bitcoin-transactions/">Creating Bitcoin Transactions</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Bitcoin/bitcoin-contract-scripts/">Bitcoin Contract Scripts</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Bitcoin/lightning-at-home/">Lightning at Home</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Bitcoin/lnd-overview-and-developer-guide/">LND Overview and Developer Guide</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Getting Started</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/blockchain-explained/">Blockchain Explained</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/an-introduction-to-smart-contracts-with-solidity/">An Introduction to Smart Contracts with Solidity</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/an-introduction-to-smart-contracts-with-vyper/">An Introduction to Smart Contracts with Vyper</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/cute-kitties-and-where-to-find-them-an-introducti/">Cute Kitties and Where to Find Them â€” An Introduction to Non-Fungible Tokens</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/erc-721-non-fungible-token-standard/">ERC-721 Non-Fungible Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/erc-20-token-standard/">ERC-20 Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/develop-your-erc-20-token-explained%21/">Develop your ERC-20 Tokenâ€Šâ€”â€Šexplained!</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/gamifying-crypto-assets-with-the-erc998-composabl/">Gamifying Crypto Assets with the ERC998 Composables Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/erc-20-and-its-discontents--the-rise-of-comrades-/">ERC-20 and Its Discontents  The Rise of Comrades ERC-777 & ERC-1820</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/creating-a-dapp-in-go-with-geth/">Creating a DApp in Go with Geth</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/smart-contracts-integration-with-nethereum/">Smart contracts integration with Nethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/signing-messages-with-nethereum/">Signing messages with Nethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/managing-nonces-with-nethereum/">Managing nonces with Nethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/connecting-to-an-ethereum-client-with-java-eclips/">Connecting to an Ethereum client with Java, Eclipse and Web3j</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Privacy</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/introduction-to-cryptography/">Introduction to Cryptography</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/building-on-bulletproofs-short-proofs-for-confide/">Building on Bulletproofs - Short Proofs for Confidential Transactions</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/enigma-protocol/">Enigma Protocol</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/how-to-code-your-own-confidential-token-on-ethere/">How to Code Your Own Confidential Token on Ethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/data-privacy-with-the-nucypher-network/">Data Privacy with the NuCypher Network</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/nucypher-pyumbral/">NuCypher - PyUmbral</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/nightfall-private-token-and-nft-transfers-on-ethe/">Nightfall - Private Token and NFT Transfers on Ethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/privacy-with-pantheon-ethereum-java-client/">Privacy with Pantheon Ethereum Java Client</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/parity-private-transactions/">Parity - Private Transactions</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/introducing-beam%21/">Introducing Beam!</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/a-short-history-of-mimblewimble--from-hogwarts-to/">A Short History of Mimblewimble  From Hogwarts to Mobile Wallets</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/why-beam-is-sound-money/">Why Beam is Sound Money</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/introduction-to-mimblewimble-and-grin/">Introduction to MimbleWimble and Grin</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/a-beginner-s-guide-to-zcash/">A beginnerâ€™s guide to Zcash</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Privacy/a-beginner-s-guide-to-monero/">A beginnerâ€™s guide to Monero</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Open Finance (DeFi)</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/kyber-network--on-chain-liquidity-protocol/">Kyber Network  On-chain liquidity protocol</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/compound--money-markets-on-ethereum/">Compound  Money markets on Ethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/0x--peer-to-peer-exchange-protocol/">0x  Peer-to-peer exchange protocol</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/makerdao--decentralized-stablecoin-and-collateral/">MakerDAO  Decentralized stablecoin and collateral loans</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/uniswap--protocol-for-automated-token-exchange/">Uniswap  Protocol for automated token exchange</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/set-protocol--baskets-of-tokenized-assets/">Set Protocol  Baskets of tokenized assets</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/an-introduction-to-bonding-curves/">An Introduction to Bonding Curves</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/incentivizing-high-quality-curation-with-a-token-/">Incentivizing high-quality curation with a Token-Curated Registry</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">DevOps</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../DevOps/lint-your-solidity-contracts-with-solhint/">Lint your Solidity contracts with Solhint</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../DevOps/lint-your-solidity-contracts-with-ethlint/">Lint your Solidity contracts with Ethlint</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../DevOps/truffle--testing-your-smart-contract/">Truffle  Testing your smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../DevOps/truffle-101-development-tools-for-smart-contracts/">Truffle 101 - Development Tools for Smart Contracts</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../DevOps/analyze-solidity-smart-contracts-with-slither/">Analyze Solidity Smart Contracts with Slither</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">SecureETH</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../SecureETH/system-description-document/">System Description Document</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../SecureETH/secureth-guidelines-getting-started/">SecurEth Guidelines - Getting Started</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../SecureETH/secureth-guidelines-introduction/">SecurEth Guidelines Introduction</a></li>
</ul></li>
</ul></li>
                </ul>
            </nav>
            <div class="repo">
    <div class="previous"><a href="../%2848%29-deploy-nextcloud-on-kuberbetes--the-self-hos/">&laquo; Previous</a></div>
    <div class="next"><a href="../%2868%29-self-host-pi-hole-on-kubernetes-and-block-ad/">Next &raquo;</a></div>
</div>
        </aside>
        <div id="spacer"><button class="arrow"></button></div>
        <main>
            <div class="home-top">
                <button class="hamburger"></button>
                <a href="../../.." class="site-name"> archive.kauri.io</a>
            </div>
            <div id="main">
                <nav class="breadcrumbs">
<ul>
    <li>Collections &raquo; </li><li>Build your very own self-hosting platform with Raspberry Pi and Kubernetes</li>
</ul>
</nav>
                <div id="content"><h1 id="58-self-host-your-media-center-on-kubernetes-with-plex-sonarr-radarr-transmission-and-jackett">(5/8) Self-host your Media Center On Kubernetes with Plex, Sonarr, Radarr, Transmission and Jackett</h1>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmUMQnRmFtNMXkBfYQdjG9WMCpAof49zavMNJXYHSDSa2k" /></p>
<p><br /></p>
<h4 id="this-article-is-part-of-the-series-build-your-very-own-self-hosting-platform-with-raspberry-pi-and-kubernetes">This article is part of the series <a href="https://kauri.io/build-your-very-own-self-hosting-platform-with-raspberry-pi-and-kubernetes/5e1c3fdc1add0d0001dff534/c">Build your very own self-hosting platform with Raspberry Pi and Kubernetes</a></h4>
<ol>
<li><a href="https://kauri.io/build-your-very-own-self-hosting-platform-with-raspberry-pi-and-kubernetes-introduction/1229f21044ef4bff8df35875d6803776/a">Introduction</a></li>
<li><a href="https://kauri.io/install-raspbian-operating-system-and-prepare-the-system-for-kubernetes/7df2a9f9cf5f4f6eb217aa7223c01594/a">Install Raspbian Operating-System and prepare the system for Kubernetes</a></li>
<li><a href="https://kauri.io/install-and-configure-a-kubernetes-cluster-with-k3s-to-self-host-applications/418b3bc1e0544fbc955a4bbba6fff8a9/a">Install and configure a Kubernetes cluster with k3s to self-host applications</a></li>
<li><a href="https://kauri.io/deploy-nextcloud-on-kuberbetes:-the-self-hosted-dropbox/f958350b22794419b09fc34c7284b02e/a">Deploy NextCloud on Kuberbetes: The self-hosted Dropbox</a></li>
<li><strong>Self-host your Media Center On Kubernetes with Plex, Sonarr, Radarr, Transmission and Jackett</strong></li>
<li><a href="https://kauri.io/-selfhost-pihole-on-kubernetes-and-block-ads-and/5268e3daace249aba7db0597b47591ef/a">Self-host Pi-Hole on Kubernetes and block ads and trackers at the network level</a></li>
<li><a href="https://kauri.io/selfhost-your-password-manager-with-bitwarden/b2187730d4294626b28d1d938057e2e0/a">Self-host your password manager with Bitwarden</a></li>
<li><a href="https://kauri.io/deploy-prometheus-and-grafana-to-monitor-a-kube/186a71b189864b9ebc4ef7c8a9f0a6b5/a">Deploy Prometheus and Grafana to monitor a Kubernetes cluster</a></li>
</ol>
<p><br />
<br /></p>
<h3 id="introduction">Introduction</h3>
<p>In the next article of this series, we will learn how to install and configure a Media Center onto our Kubernetes platform to automate the media aggregation and management and play our Media files. The Media Center will be composed of the following components:</p>
<ul>
<li><strong>Persistence:</strong> A dedicated volume on the SSD to store the data and files</li>
<li><strong>Torrent Proxy:</strong> Jackett is a Torrent Providers Aggregator tool helping to find efficiently BitTorent files over the web</li>
<li><strong>Downloaders:</strong> Transmission is a BitTorrent client to download the files</li>
<li><strong>TV Show/Movie Media Management:</strong> We'll use Sonarr and Radarr to automate the media aggregation. It searches, launches downloads and renames files when they go out</li>
<li><strong>Media Center/Player:</strong> Plex (server/player) will allow us to make our Media resources accessible from anywhere.</li>
</ul>
<p><img alt="" src="https://ipfs.infura.io/ipfs/Qmex8bC6gLPAHCmtAc2EHe3jnUYjXoV9GA5SFQFcrboqCu" /></p>
<p><br />
<br /></p>
<h3 id="namespace">Namespace</h3>
<p>We are going to isolate all the Kubernetes objects related to the Media Center into the namespace <code>media</code>.</p>
<p>To create a namespace, run the following command:</p>
<pre><code>$ kubectl create namespace media
</code></pre>
<p><br />
<br /></p>
<h3 id="persistence">Persistence</h3>
<p>The first step consists in setting up a volume to store our media files and data required to run each component. If you followed the previous articles to install and configure a self-hosting platform using RaspberryPi and Kubernetes, you remember we have on each worker a NFS client pointing to a SSD on <code>/mnt/ssd</code>.</p>
<p><strong>1. Deploy the Persistent Volume (PV)</strong></p>
<p>The Persistent Volume specifies the name, the size, the location and the access modes of the volume:</p>
<ul>
<li>The name of the PV is  <code>media-ssd</code></li>
<li>The size allocated is 200GB</li>
<li>The location is <code>/mnt/ssd/media</code></li>
<li>The access is ReadWriteOnce</li>
</ul>
<p>Create the following file and apply it to the k8 cluster.</p>
<pre><code class="language-yaml">## media.persistentvolume.yml
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: &quot;media-ssd&quot;
  labels:
    type: &quot;local&quot;
spec:
  storageClassName: &quot;manual&quot;
  capacity:
    storage: &quot;200Gi&quot;
  accessModes:
    - ReadWriteMany
  hostPath:
    path: &quot;/mnt/ssd/media&quot;
---
</code></pre>
<pre><code>$ kubectl apply -f media.persistentvolume.yml
persistentvolume/media-ssd created
</code></pre>
<p>You can verify the PV exists with the following command:</p>
<pre><code>$ kubectl get pv

NAME            CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS   REASON   AGE
media-ssd       200Gi      RWO            Retain           Available           manual                  34s
</code></pre>
<p><br />
<strong>2. Create the Persistent Volume Claim (PVC)</strong></p>
<p>The Persistent Volume Claim is used to map a Persistent Volume to a deployment or stateful set. Unlike the PV, the PVC belongs to a namespace.</p>
<p>Create the following file and apply it to the k8 cluster.</p>
<pre><code class="language-yaml">## media.persistentvolumeclaim.yml
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: &quot;media&quot;
  name: &quot;media-ssd&quot;
spec:
  storageClassName: &quot;manual&quot;
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: &quot;200Gi&quot;
---
</code></pre>
<pre><code>$ kubectl apply -f media.persistentvolumeclaim.yml
persistentvolumeclaim/media-ssd created
</code></pre>
<p>You can verify the PVC exists with the following command:</p>
<pre><code>$ kubectl get pvc -n media

NAME            STATUS   VOLUME          CAPACITY   ACCESS MODES   STORAGECLASS   AGE
media-ssd       Bound    media-ssd       200Gi      RWO            manual         26s
</code></pre>
<p><br />
<br /></p>
<h3 id="ingress">Ingress</h3>
<p>After the persistent volume, we are now going to deploy the ingress responsible of making accessible a service from outside the cluster by mapping an internal <code>service:port</code> to a host. To choose a host, we need to configure a DNS like we did for NextCloud "nextcloud.<domain.com>" in the previous article. However, unlike NextCloud, the Media Center components have no reason to be exposed on the Internet, we can pick a host that will be resolved internally to our Nginx proxy (available at <code>192.168.0.240</code> : LoadBalancer IP). The simplest solution is to use <a href="https://nip.io">nip.io</a> which allows us to map an IP (in our case <code>192.168.0.240</code>) to a hostname without touching <code>/etc/hosts</code> or configuring a DNS. Basically it resolves <code>&lt;anything&gt;.&lt;ip&gt;.nip.io</code> by <code>&lt;ip&gt;</code> without requiring anything else, Magic !</p>
<p><strong>1. Create the file <code>media.ingress.yaml</code></strong></p>
<p>Create the following Ingress config file <code>media.ingress.yaml</code> to map the routes to each service we will deploy right after this step:</p>
<ul>
<li><code>http://media.192.168.0.240.nip.io/transmission</code> -&gt; <code>transmission-transmission-openvpn:80</code></li>
<li><code>http://media.192.168.0.240.nip.io/sonarr</code> -&gt; <code>sonarr:80</code></li>
<li><code>http://media.192.168.0.240.nip.io/jackett</code> -&gt; <code>jackett:80</code></li>
<li><code>http://media.192.168.0.240.nip.io/radarr</code> -&gt; <code>radarr:80</code></li>
<li><code>http://media.192.168.0.240.nip.io/</code> -&gt; <code>plex-kube-plex:32400</code></li>
</ul>
<pre><code class="language-yaml">## media.ingress.yaml
---
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  namespace: &quot;media&quot;
  name: &quot;media-ingress&quot;
spec:
  rules:
  - host: &quot;media.192.168.0.240.nip.io&quot;
    http:
      paths:
        - backend:
            serviceName: &quot;transmission-transmission-openvpn&quot;
            servicePort: 80
          path: &quot;/transmission&quot;
        - backend:
            serviceName: &quot;sonarr&quot;
            servicePort: 80
          path: &quot;/sonarr&quot;
        - backend:
            serviceName: &quot;jackett&quot;
            servicePort: 80
          path: &quot;/jackett&quot;
        - backend:
            serviceName: &quot;radarr&quot;
            servicePort: 80
          path: &quot;/radarr&quot;
        - backend:
            serviceName: &quot;plex-kube-plex&quot;
            servicePort: 32400
          path: &quot;/&quot;
---
</code></pre>
<p><br />
<strong>2. Deploy the ingress</strong></p>
<p>Deploy the Ingress by applying the file <code>media.ingress.yaml</code>.</p>
<pre><code>$ kubectl apply -f media.ingress.yaml
ingress.extensions/media-ingress created
</code></pre>
<p><br />
<strong>3. Confirm the Ingress is correctly deployed</strong></p>
<p>Try the URL <a href="http://media.192.168.0.240.nip.io">http://media.192.168.0.240.nip.io</a> from your browser and confirm it returns the error message <code>503 Service Temporarily Unavailable</code> which is normal because we haven't deployed anything yet.</p>
<p><img alt="" src="https://i.imgur.com/tIC7P0r.png" /></p>
<p><br />
<br /></p>
<h3 id="heml-repository-add-bananaspliff">Heml Repository - add Bananaspliff</h3>
<p>Someone already made a very good job at creating specific <a href="https://bananaspliff.github.io/geek-charts/">Helm Charts</a> for the all the software we wish to install in this tutorial. Add the following repository to your Helm using the following command:</p>
<pre><code>$ helm repo add bananaspliff https://bananaspliff.github.io/geek-charts
$ helm repo update
</code></pre>
<p><br />
<br /></p>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmTp1hoJ558ZtTRXDtsmj6smFJLq2y6J8d7a5MD6gmPzfH" /></p>
<p><br /></p>
<h3 id="bittorrent-client-transmission-over-vpn">BitTorrent client - Transmission over VPN</h3>
<p>The first bit of software to install is <a href="https://transmissionbt.com">Transmission</a>, an open-source BitTorent client offering an API, great for integration and automation. Because many Internet providers and Governments disproves BitTorent download, we are going to deploy Transmission alongside a VPN. The image <a href="https://haugene.github.io/docker-transmission-openvpn/">haugene/transmission-openvpn</a> includes Transmission and supports a very large range of VPN providers (see <a href="https://haugene.github.io/docker-transmission-openvpn/supported-providers/">here</a>) to obfuscate the traffic. I will be using NordVPN but change appropriately to your need.</p>
<p><br />
<strong>1. Create a Kubernetes secret to store your VPN password</strong></p>
<p>We first need to safely store our VPN Provider username and password into a <a href="https://kubernetes.io/docs/concepts/configuration/secret/">Kubernetes secret</a>. Run the command using your own VPN username and password:</p>
<pre><code>$ kubectl create secret generic openvpn \
    --from-literal username=&lt;VPN_USERNAME&gt; \
    --from-literal password=&lt;VPN_PASSWORD&gt; \
    --namespace media
</code></pre>
<p><br />
<strong>2. Write the Helm configuration</strong></p>
<p>Next, we will configure the chart <a href="https://github.com/bananaspliff/geek-charts/tree/gh-pages/transmission-openvpn">bananaspliff/transmission-openvpn</a>. The default configuration can be seen by running the following command <code>$ helm show values bananaspliff/transmission-openvpn</code>.</p>
<p>Create the file <code>media.transmission-openvpn.values.yml</code> containing the following configuration.</p>
<pre><code class="language-yaml">## media.transmission-openvpn.values.yml
replicaCount: 1

image:
  repository: &quot;haugene/transmission-openvpn&quot;
  tag: &quot;latest-armhf&quot; # Suffixed by -armhf to pull the ARM image
  pullPolicy: &quot;IfNotPresent&quot;

env:
  - name: OPENVPN_PROVIDER
    value: &quot;NORDVPN&quot; # VPN provider. List of supported providers: https://haugene.github.io/docker-transmission-openvpn/supported-providers/
  - name: OPENVPN_USERNAME
    valueFrom: # Reference to the secret | openvpn.username
      secretKeyRef:
        name: &quot;openvpn&quot;
        key: &quot;username&quot;
  - name: OPENVPN_PASSWORD
    valueFrom: # Reference to the secret | openvpn.password
      secretKeyRef:
        name: &quot;openvpn&quot;
        key: &quot;password&quot;
  - name: NORDVPN_PROTOCOL
    value: &quot;TCP&quot;
  - name: NORDVPN_COUNTRY
    value: &quot;CH&quot; # Country where we want to download over VPN
  - name: NORDVPN_CATEGORY
    value: &quot;P2P&quot; # VPN Type
  - name: LOCAL_NETWORK
    value: &quot;192.168.0.0/24&quot;
  - name: TRANSMISSION_PEER_PORT
    value: &quot;47444&quot;
  - name: TRANSMISSION_DOWNLOAD_DIR
    value: &quot;/downloads/transmission&quot;
  - name: PUID
    value: &quot;1000&quot;
  - name: PGID
    value: &quot;1000&quot;

service:
  type: ClusterIP
  port: 80

volumes:
  - name: &quot;media-ssd&quot;
    persistentVolumeClaim:
      claimName: &quot;media-ssd&quot; # PersistentVolumeClaim created earlier
  - name: &quot;dev-tun&quot; # Needed for VPN
    hostPath:
      path: &quot;/dev/net/tun&quot;

volumeMounts:
  - name: &quot;media-ssd&quot;
    mountPath: &quot;/data&quot;
    subPath: &quot;configs/transmission-data&quot; # Path /mnt/ssd/media/configs/transmission-data where transmission writes the configuration
  - name: &quot;media-ssd&quot;
    mountPath: &quot;/downloads/transmission&quot;
    subPath: &quot;downloads/transmission&quot; # Path /mnt/ssd/media/downloads/transmission where transmission downloads Torrents
  - name: &quot;dev-tun&quot;
    mountPath: &quot;/dev/net/tun&quot; # Needed for VPN

securityContext:
  capabilities: # Needed for VPN
    add:
      - NET_ADMIN
</code></pre>
<p><br />
<strong>2. Install the chart <code>bananaspliff/transmission-openvpn</code></strong></p>
<p>Execute the following command to install the chart <code>bananaspliff/transmission-openvpn</code> with the above configuration onto the namespace <code>media</code>.</p>
<pre><code>$ helm install transmission bananaspliff/transmission-openvpn \
    --values media.transmission-openvpn.values.yml \
    --namespace media
</code></pre>
<p>After a couple of minutes, you should observe a pod named <code>transmission-transmission-openvpn-xxx</code> Running.</p>
<pre><code>$ kubectl get pods -n media -l app=transmission-openvpn -o wide

NAME                                                 READY   STATUS    RESTARTS   AGE   IP           NODE           NOMINATED NODE   READINESS GATES
transmission-transmission-openvpn-8446dbf97c-rzw5l   1/1     Running   0          29m   10.42.1.26   kube-worker1   &lt;none&gt;           &lt;none&gt;
</code></pre>
<p><br />
<strong>3. Access to Transmission Web console</strong></p>
<p>Now Transmission and the Nginx Ingress routes are deployed, you should be able to access the Transmission Web console via <a href="http://media.192.168.0.240.nip.io/transmission">http://media.192.168.0.240.nip.io/transmission</a>.</p>
<p><img alt="" src="https://i.imgur.com/qBAFOA1.png" /></p>
<p><br />
<br /></p>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmNsoV9jUjVJVz4dw9RVFUy8N6Q6rsZAHvHXk6aooMnZAZ" /></p>
<p><br /></p>
<h3 id="torrent-providers-aggregator-jackett-over-vpn">Torrent Providers Aggregator- Jackett over VPN</h3>
<p><a href="https://github.com/Jackett/Jackett">Jackett</a> is a Torrent Providers Aggregator which translates search queries from applications like Sonarr or Radarr into tracker-site-specific http queries, parses the html response, then sends results back to the requesting software. Because some Internet Providers might also block access to Torrent websites, I packaged a version of Jackett using a VPN connection (similar to <em>transmission-over-vpn</em>) accessible on <a href="https://hub.docker.com/repository/docker/gjeanmart/jackettvpn">Docker hub - gjeanmart/jackettvpn:arm-latest</a>.</p>
<p><br />
<strong>1. Write the Helm configuration</strong></p>
<p>Let's now configure the chart <a href="https://github.com/bananaspliff/geek-charts/tree/gh-pages/jackett">bananaspliff/jackett</a>. The default configuration can be seen by running the following command <code>$ helm show values bananaspliff/jackett</code>.</p>
<p>Create the file <code>media.jackett.values.yml</code> containing the following configuration.</p>
<pre><code class="language-yaml">## media.jackett.values.yml
replicaCount: 1

image:
  repository: &quot;gjeanmart/jackettvpn&quot; # Special image to use Jackett over a VPN
  tag: &quot;arm-latest&quot;
  pullPolicy: IfNotPresent

env:
  - name: VPN_ENABLED
    value: &quot;yes&quot; # Enable Jackett over VPN
  - name: VPN_USERNAME
    valueFrom:
      secretKeyRef: # Reference to the secret | openvpn.username
        name: &quot;openvpn&quot;
        key: &quot;username&quot;
  - name: VPN_PASSWORD
    valueFrom:
      secretKeyRef: # Reference to the secret | openvpn.password
        name: &quot;openvpn&quot;
        key: &quot;password&quot;
  - name: LAN_NETWORK
    value: &quot;192.168.0.0/24&quot;
  - name: CREATE_TUN_DEVICE
    value: &quot;true&quot; # Needed for VPN
  - name: PUID
    value: &quot;1000&quot;
  - name: PGID
    value: &quot;1000&quot;

service:
  type: ClusterIP
  port: 80

volumes:
  - name: &quot;media-ssd&quot;
    persistentVolumeClaim:
      claimName: &quot;media-ssd&quot; # PersistentVolumeClaim created earlier
  - name: &quot;dev-tun&quot;  # Needed for VPN
    hostPath:
      path: &quot;/dev/net/tun&quot;

volumeMounts:
  - name: &quot;media-ssd&quot;
    mountPath: &quot;/config&quot;
    subPath: &quot;configs/jackett&quot; # Path /mnt/ssd/media/configs/jackett where jackett writes the configuration
  - name: &quot;media-ssd&quot;
    mountPath: &quot;/downloads&quot;
    subPath: &quot;downloads/jackett&quot; # Path /mnt/ssd/media/downloads/jackett ???

securityContext:
  capabilities: # Needed for VPN
    add:
      - NET_ADMIN
</code></pre>
<p><br />
*<em>2. Configure VPN (only if you configured VPN_ENABLED=yes)</em></p>
<p>a. Create the following directory structure on your SSD</p>
<pre><code class="language-shell">$ mkdir -p /mnt/ssd/media/configs/jackett/openvpn/
</code></pre>
<p>b. Copy one OpenVPN file (usually provided by your VPN provider) into the folder <code>/mnt/ssd/media/configs/jackett/openvpn/</code></p>
<p>c. Create a file <code>credentials.conf</code> into the folder <code>/mnt/ssd/media/configs/jackett/openvpn/</code> composed of two line (first one: username and second one password)</p>
<pre><code>&lt;VPN_USERNAME&gt;
&lt;VPN_PASSWORD&gt;
</code></pre>
<p><strong>3. Pre-configure Jackett</strong></p>
<p>a. Create the following directory structure on your SSD</p>
<pre><code class="language-shell">$ mkdir -p /mnt/ssd/media/configs/jackett/Jackett/
</code></pre>
<p>b. Create the file <code>ServerConfig.json</code> into the folder <code>/mnt/ssd/media/configs/jackett/Jackett/</code> with the following content:</p>
<pre><code class="language-json">{
  &quot;BasePathOverride&quot;: &quot;/jackett&quot;
}
</code></pre>
<p><br />
<strong>4. Install the chart <code>bananaspliff/jackett</code></strong></p>
<p>Execute the following command to install the chart <code>bananaspliff/jackett</code> with the above configuration onto the namespace <code>media</code>.</p>
<pre><code>$ helm install jackett bananaspliff/jackett \
    --values media.jackett.values.yml \
    --namespace media
</code></pre>
<p>After a couple of minutes, you should observe a pod named <code>jackett-xxx</code> Running.</p>
<pre><code>$ kubectl get pods -n media -l app=jackett -o wide

NAME                      READY   STATUS    RESTARTS   AGE    IP           NODE           NOMINATED NODE   READINESS GATES
jackett-864697466-69xwt   1/1     Running   0          101s   10.42.1.29   kube-worker1   &lt;none&gt;           &lt;none&gt;
</code></pre>
<p><br />
<strong>5. Access Jackett</strong></p>
<p>Go to Jackett on <a href="http://media.192.168.0.240.nip.io/jackett">http://media.192.168.0.240.nip.io/jackett</a> and try to add one or more indexers.</p>
<p><img alt="" src="https://i.imgur.com/IglUSIZ.png" /></p>
<p><br />
<br /></p>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmXrpHKsVCnsFQpzhprH1TYdBbyZaxssjy8hv34XkybULz" /></p>
<p><br /></p>
<h3 id="tv-show-library-management-sonarr">TV Show Library Management - Sonarr</h3>
<p><a href="https://sonarr.tv/">Sonarr</a> is a TV Show library management tool that offers multiple features:</p>
<ul>
<li>List all your episodes and see what's missing</li>
<li>See upcoming episodes</li>
<li>Automatically search last released episodes (via Jackett) and launch download (via Transmission)</li>
<li>Move downloaded files into the right directory</li>
<li>Notify when a new episodes is ready (Kodi, Plex)</li>
</ul>
<p><br />
<strong>1. Write the Helm configuration</strong></p>
<p>Let's now configure the chart <a href="https://github.com/bananaspliff/geek-charts/tree/gh-pages/sonarr">bananaspliff/sonarr</a>. The default configuration can be seen by running the following command <code>$ helm show values bananaspliff/sonarr</code>.</p>
<p>Create the file <code>media.sonarr.values.yml</code> containing the following configuration.</p>
<pre><code class="language-yaml">### media.sonarr.values.yml
replicaCount: 1

image:
  repository: linuxserver/sonarr
  tag: arm32v7-latest # ARM image
  pullPolicy: IfNotPresent

env:
  - name: PUID
    value: &quot;1000&quot;
  - name: PGID
    value: &quot;1000&quot;

service:
  type: ClusterIP
  port: 80

volumes:
  - name: media-ssd
    persistentVolumeClaim:
      claimName: &quot;media-ssd&quot; # PersistentVolumeClaim created earlier

volumeMounts:
  - name: media-ssd
    mountPath: &quot;/config&quot;
    subPath: &quot;configs/sonarr&quot; # Path /mnt/ssd/media/configs/sonarr where sonarr writes the configuration
  - name: media-ssd
    mountPath: &quot;/downloads/transmission&quot;
    subPath: &quot;downloads/transmission&quot; # Path /mnt/ssd/media/downloads/transmission where sonarr picks up downloaded episodes
  - name: media-ssd
    mountPath: &quot;/tv&quot;
    subPath: &quot;library/tv&quot; # Path /mnt/ssd/media/library/tv where sonarr moves and renames the episodes
</code></pre>
<p><br />
<strong>2. Pre-configure Sonarr</strong></p>
<p>a. Create the following directory structure on your SSD</p>
<pre><code class="language-shell">$ mkdir -p /mnt/ssd/media/configs/sonarr/
</code></pre>
<p>b. Create the file <code>config.xml</code> into the folder <code>/mnt/ssd/media/configs/sonarr/</code> with the following content:</p>
<pre><code class="language-xml">&lt;Config&gt;
  &lt;UrlBase&gt;/sonarr&lt;/UrlBase&gt;
&lt;/Config&gt;
</code></pre>
<p><br />
<strong>3. Install the chart <code>bananaspliff/sonarr</code></strong></p>
<p>Execute the following command to install the chart <code>bananaspliff/sonarr</code> with the above configuration onto the namespace <code>media</code>.</p>
<pre><code>$ helm install sonarr bananaspliff/sonarr \
    --values media.sonarr.values.yml \
    --namespace media
</code></pre>
<p>After a couple of minutes, you should observe a pod named <code>sonarr-xxx</code> Running.</p>
<pre><code>$ kubectl get pods -n media -l app=sonarr -o wide

NAME                      READY   STATUS    RESTARTS   AGE     IP           NODE           NOMINATED NODE   READINESS GATES
sonarr-574c5f85d7-n9jc6   1/1     Running   0          3m13s   10.42.1.30   kube-worker1   &lt;none&gt;           &lt;none&gt;
</code></pre>
<p><br />
<strong>4. Access Sonarr</strong></p>
<p>Go to Sonarr on <a href="http://media.192.168.0.240.nip.io/sonarr">http://media.192.168.0.240.nip.io/sonarr</a> and start setting up the library automation. Refer to the <a href="https://github.com/Sonarr/Sonarr/wiki">wiki</a> for more details.</p>
<p><img alt="" src="https://i.imgur.com/HMzjbcm.png" /></p>
<ul>
<li>Configure the connection to Transmission into <strong>Settings / Download Client / Add (Transmission)</strong> using the hostname and port <code>transmission-transmission-openvpn.media:80</code></li>
</ul>
<p><img alt="" src="https://i.imgur.com/cWN5WKY.png" /></p>
<ul>
<li>Configure the connection to Jackett into <strong>Settings / Indexers / Add (Torznab / Custom)</strong> using the hostname and port <code>jackett.media:80</code></li>
</ul>
<p><img alt="" src="https://i.imgur.com/TFvpjYa.png" /></p>
<p><br />
<br /></p>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmXoFr3jf7GxTXtg5ezY1RKbUDjNiGXBhF2cbwwFYetNSk" /></p>
<p><br /></p>
<h3 id="movie-library-management-radarr">Movie Library Management - Radarr</h3>
<p><a href="https://radarr.video/">Radarr</a> is a Movie library management tool that offers multiple features:</p>
<ul>
<li>List all your movies</li>
<li>Search movies (via Jackett) and launch download (via Transmission)</li>
<li>Move downloaded files into the right directory</li>
<li>Notify when a new movie is ready (Kodi, Plex)</li>
</ul>
<p><br />
<strong>1. Write the Helm configuration</strong></p>
<p>Let's now configure the chart <a href="https://github.com/bananaspliff/geek-charts/tree/gh-pages/radarr">bananaspliff/radarr</a>. The default configuration can be seen by running the following command <code>$ helm show values bananaspliff/radarr</code>.</p>
<p>Create the file <code>media.radarr.values.yml</code> containing the following configuration.</p>
<pre><code class="language-yaml">## media.radarr.values.yml
replicaCount: 1

image:
  repository: &quot;linuxserver/radarr&quot;
  tag: &quot;arm32v7-latest&quot; # ARM image
  pullPolicy: IfNotPresent

env:
  - name: PUID
    value: &quot;1000&quot;
  - name: PGID
    value: &quot;1000&quot;

service:
  type: ClusterIP
  port: 80

volumes:
  - name: &quot;media-ssd&quot;
    persistentVolumeClaim:
      claimName:  &quot;media-ssd&quot; # PersistentVolumeClaim created earlier

volumeMounts:
  - name: &quot;media-ssd&quot;
    mountPath: &quot;/config&quot;
    subPath: &quot;configs/radarr&quot; # Path /mnt/ssd/media/configs/radarr where radarr writes the configuration
  - name: &quot;media-ssd&quot;
    mountPath: &quot;/downloads/transmission&quot;
    subPath: &quot;downloads/transmission&quot; # Path /mnt/ssd/media/downloads/transmission where radarr picks up downloaded movies
  - name: media-ssd
    mountPath: &quot;/movies&quot;
    subPath: &quot;library/movies&quot; # Path /mnt/ssd/media/library/movies where radarr moves and renames the movies
</code></pre>
<p><br />
<strong>2. Pre-configure Radarr</strong></p>
<p>a. Create the following directory structure on your SSD</p>
<pre><code class="language-shell">$ mkdir -p /mnt/ssd/media/configs/radarr/
</code></pre>
<p>b. Create the file <code>config.xml</code> into the folder <code>/mnt/ssd/media/configs/radarr/</code> with the following content:</p>
<pre><code class="language-xml">&lt;Config&gt;
  &lt;UrlBase&gt;/radarr&lt;/UrlBase&gt;
&lt;/Config&gt;
</code></pre>
<p><br />
<strong>3. Install the chart <code>bananaspliff/radarr</code></strong></p>
<p>Execute the following command to install the chart <code>bananaspliff/radarr</code> with the above configuration onto the namespace <code>media</code>.</p>
<pre><code>$ helm install radarr bananaspliff/radarr \
    --values media.radarr.values.yml \
    --namespace media
</code></pre>
<p>After a couple of minutes, you should observe a pod named <code>radarr-xxx</code> Running.</p>
<pre><code>$  kubectl get pods -n media -l app=radarr -o wide

NAME                      READY   STATUS    RESTARTS   AGE   IP          NODE           NOMINATED NODE   READINESS GATES
radarr-7846697889-jhqbz   1/1     Running   0          11m   10.42.2.2   kube-worker2   &lt;none&gt;           &lt;none&gt;
</code></pre>
<p><br />
<strong>4. Access Radarr</strong></p>
<p>Go to Radarr on <a href="http://media.192.168.0.240.nip.io/radarr">http://media.192.168.0.240.nip.io/radarr</a> and start setting up the library automation. Refer to the <a href="https://github.com/Radarr/Radarr/wiki">wiki</a> for more details.</p>
<p><img alt="" src="https://i.imgur.com/gqCB8TX.png" /></p>
<p><br />
<br /></p>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmbASTjZAenaVQ3FGg9oGRSjo1PZVG5JwjjKkdRSFPzaEu" /></p>
<p><br /></p>
<h3 id="media-server-plex">Media Server - Plex</h3>
<p><a href="https://www.plex.tv/en-gb/">Plex Media Server</a> is a software to serve and stream your personal Media library (movies, TV show and music). It fetches the Media resources and builds up a catalogue accessible to any compatible players (Desktop/Mobiles) and transcodes the stream to the player.</p>
<p><br /></p>
<p>In this section, we are going to deploy Plex Media Server (PMS) on Kubernetes using the Helm chart <a href="https://github.com/munnerz/kube-plex">kube-plex</a>.</p>
<p><strong>1. Clone the charts</strong></p>
<p>This Helm chart is not available via an online repository like jetstack or bananaspliff. We need to download the chart locally. Clone the following repository using <code>git</code>.</p>
<pre><code>$ git clone https://github.com/munnerz/kube-plex.git
</code></pre>
<p><br />
<strong>2. Get a claim token</strong></p>
<p>Obtain a Plex Claim Token by visiting <a href="https://plex.tv/claim">plex.tv/claim</a>. You need to create an account if you haven't already one yet.</p>
<p>This will be used to bind your new PMS instance to your own user account automatically.</p>
<p><img alt="" src="https://i.imgur.com/VLScSRw.png" /></p>
<p><br />
<strong>3. Create the Helm config file <code>media.plex.values.yml</code></strong></p>
<pre><code class="language-yaml">## media.plex.values.yml

claimToken: &quot;&lt;CLAIM_TOKEN&gt;&quot; # Replace `&lt;CLAIM_TOKEN&gt;` by the token obtained previously.

image:
  repository: linuxserver/plex
  tag: arm32v7-latest
  pullPolicy: IfNotPresent

kubePlex:
  enabled: false # kubePlex (transcoder job) is disabled because not available on ARM. The transcoding will be performed by the main Plex instance instead of a separate Job.

timezone: Europe/London

service:
  type: LoadBalancer # We will use a LoadBalancer to obtain a virtual IP that can be exposed to Plex Media via our router
  port: 32400 # Port to expose Plex

rbac:
  create: true

nodeSelector: {}

persistence:
  transcode:
    claimName: &quot;media-ssd&quot;
  data:
    claimName: &quot;media-ssd&quot;
  config:
    claimName: &quot;media-ssd&quot;

resources: {}
podAnnotations: {}
proxy:
  enable: false
</code></pre>
<p><br />
<strong>4. Install Plex using Helm</strong></p>
<p>Now install Plex with Helm specifying our config file <code>media.plex.values.yml</code> and the namespace <code>media</code>:</p>
<pre><code>$ helm install plex kube-plex/charts/kube-plex/ \
  --values media.plex.values.yml \
  --namespace media
</code></pre>
<p>Wait until <code>kube-plex</code> (Plex Media Server) is up and running.</p>
<pre><code>$ kubectl get pods -n media -l app=kube-plex -o wide

NAME                             READY   STATUS    RESTARTS   AGE   IP           NODE          NOMINATED NODE   READINESS GATES
plex-kube-plex-b76f8f478-4tn97   1/1     Running   0          55s   10.42.0.27   kube-master   &lt;none&gt;           &lt;none&gt;
</code></pre>
<p>You can find the Virtual IP attributed to Plex by MetalLB (in my case <code>192.168.0.241</code>).</p>
<pre><code>$ kubectl get services -n media -l app=kube-plex -o wide

NAME             TYPE           CLUSTER-IP    EXTERNAL-IP     PORT(S)                                      AGE   SELECTOR
plex-kube-plex   LoadBalancer   10.43.77.73   192.168.0.241   32400:30048/TCP,80:32383/TCP,443:31274/TCP   16m   app=kube-plex,release=plex
</code></pre>
<p><br />
<strong>5. Router config (outside access only)</strong></p>
<p>If you want to access remotely to your Media library, you will need to configure a port-forwarding to allow Plex to access your PMS.</p>
<p>Add a route to port-forward incoming requests on port <code>32400</code> to <code>192.168.0.241:32400</code> (Plex virtual IP assigned by MetalLB).</p>
<p><img alt="" src="https://i.imgur.com/A0rmhfH.png" /></p>
<p><br />
<strong>6. Setup Plex</strong></p>
<p>Try now to access (from your network) to Plex Web Player on <a href="http://192.168.0.241:32400/">http://192.168.0.241:32400</a>. You should see the setup wizard :</p>
<ul>
<li>Click on <em>Got It</em></li>
</ul>
<p><img alt="" src="https://i.imgur.com/eMqahAZ.png" /></p>
<ul>
<li>Select <em>Next</em></li>
</ul>
<p>You can uncheck <em>Allow me to access my media outside my home</em> if you only want to use Plex within your home network.</p>
<p><img alt="" src="https://i.imgur.com/ActauD5.png" /></p>
<ul>
<li>Configure the different Libraries (movies, tv shows, music, etc.)</li>
</ul>
<p>Our Media will be accessible from the folder <code>/data/</code>.</p>
<p><img alt="" src="https://i.imgur.com/lU9g43e.png" /></p>
<ul>
<li>Click on <em>Done</em></li>
</ul>
<p><img alt="" src="https://i.imgur.com/lvbswJK.png" /></p>
<ul>
<li>All set! Plex will start scrapping your library (bear in mind, this can take a while)</li>
</ul>
<p><img alt="" src="https://i.imgur.com/5ABd3Rw.jpg" /></p>
<ul>
<li>For outside access, you need to configure the external port used to map outside incoming requests to Plex. Go to <em>Settings / Remote Access</em> and check <em>Manually specify the public</em> to set the port <code>32400</code> (as configured in the router - Local)</li>
</ul>
<p><img alt="" src="https://i.imgur.com/64ntDcS.png" /></p>
<p><br />
<strong>Notes</strong></p>
<ul>
<li>You can also access Plex from your local network via the ingress: <a href="http://media.192.168.0.240.nip.io/web">http://media.192.168.0.240.nip.io/web</a></li>
<li>Download the Android/iOS app and connect to your Plex account, you should automatically see your Plex Media Server with our your Media.</li>
</ul>
<p><br />
<br /></p>
<h3 id="conclusion">Conclusion</h3>
<p>In conclusion, you now have everything you need to automate and manage your Media and enjoy watching shows, movies or just listen some music !</p>
<p><br />
<br /></p>
<hr />
<ul>
<li><strong>Kauri original title:</strong> (5/8) Self-host your Media Center On Kubernetes with Plex, Sonarr, Radarr, Transmission and Jackett </li>
<li><strong>Kauri original link:</strong> https://kauri.io/58-selfhost-your-media-center-on-kubernetes-with-p/8ec7c8c6bf4e4cc2a2ed563243998537/a</li>
<li><strong>Kauri original author:</strong> GrÃ©goire Jeanmart (@gregjeanmart)</li>
<li><strong>Kauri original Publication date:</strong> 2020-05-26</li>
<li><strong>Kauri original tags:</strong> self-hosting, kubernetes, tv-show, k8s, plex, bittorrent, htpc</li>
<li><strong>Kauri original hash:</strong> QmWcNJUeEMcNMrBb6CUqg6egT6tmsZWiaJSU3rPY3V5bL8</li>
<li><strong>Kauri original checkpoint:</strong> unknown</li>
</ul></div>
                <footer>
    <div class="footer-buttons">
        <div class="previous"><a href="../%2848%29-deploy-nextcloud-on-kuberbetes--the-self-hos/" title="(4/8) Deploy NextCloud on Kuberbetes The self-hosted Dropbox"><span>Previous</span></a></div>
        <div class="next"><a href="../%2868%29-self-host-pi-hole-on-kubernetes-and-block-ad/" title="(6/8) Self-host Pi-Hole on Kubernetes and block ads and trackers at the network level"><span>Next</span></a></div>
    </div>
    <div class="footer-note">
        <p>
            Built with <a href="http://www.mkdocs.org">MkDocs</a> using
            <a href="https://github.com/daizutabi/mkdocs-ivory">Ivory theme</a>.
        </p>
    </div>
</footer>
            </div>
        </main>
    </div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js"></script>
    <script src="../../../search/main.js"></script>
</body>

</html>