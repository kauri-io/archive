<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <title>How to Code Your Own Confidential Token on Ethereum &mdash; archive.kauri.io</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css">
    <link rel="stylesheet" href="../../../css/theme.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <link rel="stylesheet" href="../../../css/extra.css">
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/solidity.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/rust.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script> 
</head>

<body ontouchstart="">
    <div id="container">
        <aside>
            <div class="home">
                <div class="title">
                    <button class="hamburger"></button>
                    <a href="../../.." class="site-name"> archive.kauri.io</a>
                </div>
                <div class="search">
                    <div role="search">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
        <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
    </form>
</div>
                </div>
            </div>
            <nav class="nav">
                <ul class="root">
                    <li class="toctree-l1"><a class="nav-item" href="../../..">Home</a></li>
                    <li class="toctree-l1"><button class="section nav-item">Communities</button>
<ul class="subnav">
    <li class="toctree-l2"><button class="section nav-item hide">Getting started with dapp development</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/tips-for-starting-dapp-development/">Tips for Starting Dapp Development</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/an-introduction-to-solidity-for-experienced-devel/">An Introduction to Solidity for Experienced Developers</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/truffle--adding-a-frontend-with-react-box/">Truffle  Adding a frontend with react box</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/truffle--testing-your-smart-contract/">Truffle  Testing your smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/truffle--smart-contract-compilation-and-deploymen/">Truffle  Smart Contract Compilation & Deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/understanding-smart-contract-compilation-and-depl/">Understanding smart contract compilation and deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/tools-for-dapp-development/">Tools for dApp development</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/full-stack-dapp-tutorial-series-intro/">Full Stack dApp Tutorial Series - Intro</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/erc-721-non-fungible-token-standard/">ERC-721 Non-Fungible Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/create-a-%22hello-world%22-fullstack-dapp/">Create a "Hello World" fullstack dapp</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/a-fullstack-dapp-for-creating-tokens/">A fullstack dapp for creating tokens</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/a-fullstack-dapp-for-creating-unique-tradable-tok/">A fullstack dapp for creating unique tradable tokens</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/blockchain-explained/">Blockchain Explained</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/remix-ide-your-first-smart-contract/">Remix IDE - Your first smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Getting%20started%20with%20dapp%20development/an-introduction-to-smart-contracts-with-solidity/">An Introduction to Smart Contracts with Solidity</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Java Ethereum</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/how-to-test-ethereum-smart-contracts-from-java/">How to test Ethereum smart contracts from Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/web3j-transaction-managers/">Web3j Transaction Managers</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/manage-erc20-tokens-in-java-with-web3j/">Manage ERC20 tokens in Java with Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/running-a-pantheon-node-in-java-integration-tests/">Running a Pantheon Node in Java Integration Tests</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/managing-storage-in-a-java-application-with-ipfs/">Managing storage in a Java application with IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/using-besu-the-java-ethereum-client-with-linuxmac/">Using Besu, the Java Ethereum Client with Linux/MacOS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/listening-for-ethereum-smart-contract-events-in-j/">Listening for Ethereum Smart Contract Events in Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/interacting-with-an-ethereum-smart-contract-in-ja/">Interacting with an Ethereum Smart Contract in Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/generate-a-java-wrapper-from-your-smart-contract/">Generate a Java Wrapper from your Smart Contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/manage-an-ethereum-account-with-java-and-web3j/">Manage an Ethereum account with Java and Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Java%20Ethereum/connecting-to-an-ethereum-client-with-java-eclips/">Connecting to an Ethereum client with Java, Eclipse and Web3j</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Ethereum Node Runners</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/run-an-ethereum-node-on-debian-with-an-external-s/">Run an Ethereum node on Debian with an External SSD (Mar 2020)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/ethereum-on-arm.-turn-your-arm-device-into-a-full/">Ethereum on ARM. Turn your ARM device into a full Ethereum node just by flashing a MicroSD card</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/make-use-of-your-remote-ethereum-node-using-an-ss/">Make use of your remote Ethereum node using an SSH tunnel and MetaMask</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/how-to-install-and-synchronize-your-own-remote-et/">How to install and synchronize your own remote Ethereum node</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/how-to-set-up-a-simple-linux-firewall/">How to set up a simple Linux firewall</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/supported-hardware-to-run-an-ethereum-node/">Supported hardware to run an Ethereum node</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/monitor-your-geth-node-with-google-sheet/">Monitor your Geth node with Google Sheet</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Ethereum%20Node%20Runners/running-an-ethereum-full-node-on-a-raspberrypi-4-/">Running an Ethereum Full Node on a RaspberryPi 4 (model B)</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">IPFS</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/building-a-twitter-bot-using-ipfs-cluster/">Building a Twitter Bot using IPFS Cluster ü§ñ</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/hands-on-ipld-tutorial-in-golang--part-2/">Hands-on IPLD Tutorial in Golang  PART 2</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/understanding-ipfs-in-depth%2826%29--what-is-interpla/">Understanding IPFS in Depth(2/6)  What is InterPlanetary Linked Data(IPLD)?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/hands-on-ipld-tutorial-in-golang/">Hands-on IPLD Tutorial in Golang</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/understanding-ipfs-in-depth%2816%29--a-beginner-to-ad/">Understanding IPFS in Depth(1/6)  A Beginner to Advanced Guide</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/orbitdb--serverless-distributed-peer-to-peer-data/">OrbitDB  Serverless, Distributed, Peer-to-Peer Database</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/getting-started-with-mahuta-a-search-engine-for-t/">Getting started with Mahuta - A Search engine for the IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/peer-to-peer-hypermedia-with-ipfs/">Peer-to-peer hypermedia with IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/installing-ipfs/">Installing IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/improving-ipfs-decentralization-introducing-ahken/">Improving IPFS Decentralization - Introducing Ahken</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/IPFS/managing-storage-in-a-java-application-with-ipfs/">Managing storage in a Java application with IPFS</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Documentation and technical communication</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Documentation%20and%20technical%20communication/why-do-people-write/">Why do people write?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Documentation%20and%20technical%20communication/language-and-understandable-writing/">Language and understandable writing</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Documentation%20and%20technical%20communication/documentation-structure/">Documentation structure</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../communities/Documentation%20and%20technical%20communication/why-write-documentation/">Why write documentation</a></li>
</ul></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Collections</button>
<ul class="subnav">
    <li class="toctree-l2"><button class="section nav-item hide">A Deep Dive Into The Ethereum Virtual Machine (EVM) Series</button>
<ul class="subnav hide">
    <li class="toctree-l3">
<a class="nav-item" href="../../A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-%28ev/">A Deep Dive into the Ethereum Virtual Machine (EVM) - part 1  Introduction</a></li>
    <li class="toctree-l3">
<a class="nav-item" href="../../A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-%28ev/">A Deep Dive into the Ethereum Virtual Machine (EVM) - part 2  Memory and Storage</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-%28ev/">A Deep Dive into the Ethereum Virtual Machine (EVM) - Part 3  Execution Model of the EVM</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-par/">A Deep Dive into the Ethereum Virtual Machine - Part 4  The EVM and High-Level Programming Languages</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Build your very own self-hosting platform with Raspberry Pi and Kubernetes</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2818%29-build-your-very-own-self-hosting-platform-wi/">(1/8) Build your very own self-hosting platform with Raspberry Pi and Kubernetes - Introduction</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2828%29-install-raspbian-operating-system-and-prepar/">(2/8) Install Raspbian Operating-System and prepare the system for Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2838%29-install-and-configure-a-kubernetes-cluster-w/">(3/8) Install and configure a Kubernetes cluster with k3s to self-host applications</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2848%29-deploy-nextcloud-on-kuberbetes--the-self-hos/">(4/8) Deploy NextCloud on Kuberbetes  The self-hosted Dropbox</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2858%29-self-host-your-media-center-on-kubernetes-wi/">(5/8) Self-host your Media Center On Kubernetes with Plex, Sonarr, Radarr, Transmission and Jackett</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2868%29-self-host-pi-hole-on-kubernetes-and-block-ad/">(6/8) Self-host Pi-Hole on Kubernetes and block ads and trackers at the network level</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2878%29-self-host-your-password-manager-with-bitward/">(7/8) Self-host your password manager with Bitwarden</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2888%29-deploy-prometheus-and-grafana-to-monitor-a-k/">(8/8) Deploy Prometheus and Grafana to monitor a Kubernetes cluster</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">A Hackathon Survival Guide</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/the-hack%21-what-is-a-hackathon/">The Hack?!? What is a hackathon?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/create-a-%22hello-world%22-fullstack-dapp/">Create a "Hello World" fullstack dapp</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/full-stack-dapp-tutorial-series-intro/">Full Stack dApp Tutorial Series - Intro</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/ethereum-101-part-1-what-is-ethereum/">Ethereum 101 - Part 1 - What is Ethereum?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/remix-ide-your-first-smart-contract/">Remix IDE - Your first smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/interacting-with-an-ethereum-smart-contract-in-ja/">Interacting with an Ethereum Smart Contract in Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/a-.net-developer-s-workflow-for-creating-and-call/">A¬†.NET Developer‚Äôs Workflow for Creating and Calling Ethereum Smart Contracts</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/sending-ethereum-transactions-with-rust/">Sending Ethereum Transactions with Rust</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/generate-a-java-wrapper-from-your-smart-contract/">Generate a Java Wrapper from your Smart Contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/accelerating-dapp-development-with-ethers.js/">Accelerating DApp Development with Ethers.js</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/nethereum-an-open-source-.net-integration-library/">Nethereum - An open source .NET integration library for blockchain</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/creating-a-dapp-in-go-with-geth/">Creating a DApp in Go with Geth</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/tools-for-dapp-development/">Tools for dApp development</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/ethasketch/">EthASketch</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/bountibot--rewarding-github-pull-requests-for-you/">Bountibot  rewarding GitHub Pull Requests for you and the rest of the OSS community</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20Hackathon%20Survival%20Guide/eth-dev-tools/">ETH Dev Tools</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Web3j Cheat Sheet (Java Ethereum)</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/retrieving-an-ethereum-account-balance-in-web3j/">Retrieving an Ethereum Account Balance in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/converting-between-ether-units-denominations-in-w/">Converting Between Ether Units / Denominations in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/creating-a-web3j-wallet-from-a-mnemonic-code-%28see/">Creating a Web3j Wallet from a Mnemonic Code (Seed Phrase)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/sending-an-ether-transfer-transaction-from-one-ac/">Sending an Ether Transfer Transaction from One Account to Another in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/signing-an-ethereum-transaction-in-web3j/">Signing an Ethereum Transaction in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/signing-data-in-java-and-web3j/">Signing Data in Java and Web3j</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">OpenZeppelin</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../OpenZeppelin/openzeppelin-part-1--introductory/">OpenZeppelin Part 1  Introductory</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../OpenZeppelin/openzeppelin-part-2--access-control/">OpenZeppelin Part 2  Access Control</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../OpenZeppelin/openzeppelin-part-3--token-standards/">OpenZeppelin Part 3  Token Standards</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../OpenZeppelin/openzeppelin-part-4--crowdsales/">OpenZeppelin Part 4  Crowdsales</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">A non practitioner guide to machine learning</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../A%20non%20practitioner%20guide%20to%20machine%20learning%20/getting-started-with-machine-learning-%28non-practi/">Getting Started With Machine Learning (Non practitioner guide)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20non%20practitioner%20guide%20to%20machine%20learning%20/installing-anaconda-python3-and-tensorflow/">Installing Anaconda, Python3 and Tensorflow</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20non%20practitioner%20guide%20to%20machine%20learning%20/regression-with-python-keras-and-tensorflow/">Regression with Python, Keras and Tensorflow</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20non%20practitioner%20guide%20to%20machine%20learning%20/predict-cryptocurrency-prices-with-tensorflow-as-/">Predict cryptocurrency prices with Tensorflow as binary classification problem</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../A%20non%20practitioner%20guide%20to%20machine%20learning%20/multi-class-classification-example-with-convoluti/">Multi-class classification example with Convolutional Neural Network in Keras and Tensorflow</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">An ethereum test toolkit in Go</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../An%20ethereum%20test%20toolkit%20in%20Go/sending-transactions-on-geth-s-simulated-backend/">Sending Transactions on GETH's Simulated Backend</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../An%20ethereum%20test%20toolkit%20in%20Go/interacting-with-smart-contracts-from-geth-s-simu/">Interacting with smart contracts from GETH's Simulated Backend</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../An%20ethereum%20test%20toolkit%20in%20Go/generating-a-load-of-keys-for-testing-in-go/">Generating a load of keys for testing in Go</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../An%20ethereum%20test%20toolkit%20in%20Go/the-geth-simulated-backend/">The GETH Simulated Backend</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Monitoring Kubernetes with Elastic Stack</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2815%29-getting-started-with-elastic-stack-for-monit/">(1/5) Getting started with Elastic Stack for monitoring on Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2825%29-install-elasticsearch-and-kibana-to-store-an/">(2/5) Install ElasticSearch and Kibana to store and visualize monitoring data</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2835%29-collect-metrics-with-elastic-metricbeat-for-/">(3/5) Collect metrics with Elastic Metricbeat for monitoring Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2845%29-collect-logs-with-elastic-filebeat-for-monit/">(4/5) Collect logs with Elastic Filebeat for monitoring Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2855%29-collect-traces-with-elastic-apm-for-monitori/">(5/5) Collect traces with Elastic APM for monitoring Kubernetes</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Founder interviews</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Founder%20interviews/fluree--blockchain-graphql-and-more-all-in-one-da/">Fluree  Blockchain, GraphQL, and more all in one database</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Founder%20interviews/true-anonymity-privacy-and-snapps-with-simon-harm/">True anonymity, privacy, and SNApps with Simon Harman of Loki</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Founder%20interviews/the-aeternity-blockchain-with-emil-wagner/">The √Üternity blockchain with Emil Wagner</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Founder%20interviews/embleema--the-blockchain-that-lets-you-own-your-h/">Embleema  The Blockchain That Lets You Own Your Health Data</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Vyper Full Stack dApp Tutorial Series</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/remix-ide-your-first-vyper-smart-contract/">Remix IDE - Your first Vyper smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/understanding-smart-contract-compilation-and-depl/">Understanding smart contract compilation and deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/truffle--smart-contract-compilation-and-deploymen/">Truffle  Smart Contract Compilation & Deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/truffle--testing-your-smart-contract/">Truffle  Testing your smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/tools-for-working-with-vyper/">Tools for working with Vyper</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Flexible, Upgradeable & Highly Available NFTs</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Flexible%2C%20Upgradeable%20%26%20Highly%20Available%20NFTs/creating-a-flexible-nft-%28part-1%29/">Creating a Flexible NFT (Part 1)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Flexible%2C%20Upgradeable%20%26%20Highly%20Available%20NFTs/creating-a-flexible-nft-%28part-2%29/">Creating a Flexible NFT (Part 2)</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Libra</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Libra/building-and-working-with-facebook-s-cryptocurren/">Building and Working with Facebook‚Äôs Cryptocurrency Libra</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Libra/whitepaper-deep-dive-move--facebook-libra-blockch/">Whitepaper Deep Dive‚Ää‚Äî‚ÄäMove  Facebook Libra Blockchain‚Äôs New Programming Language</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Libra/quick-dive-into-the-move-programming-language/">Quick Dive into the Move Programming Language</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Bitcoin</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Bitcoin/bitcoin-blockchain-overview/">Bitcoin Blockchain Overview</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Bitcoin/creating-bitcoin-transactions/">Creating Bitcoin Transactions</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Bitcoin/bitcoin-contract-scripts/">Bitcoin Contract Scripts</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Bitcoin/lightning-at-home/">Lightning at Home</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Bitcoin/lnd-overview-and-developer-guide/">LND Overview and Developer Guide</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Getting Started</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/blockchain-explained/">Blockchain Explained</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/an-introduction-to-smart-contracts-with-solidity/">An Introduction to Smart Contracts with Solidity</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/an-introduction-to-smart-contracts-with-vyper/">An Introduction to Smart Contracts with Vyper</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/cute-kitties-and-where-to-find-them-an-introducti/">Cute Kitties and Where to Find Them ‚Äî An Introduction to Non-Fungible Tokens</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/erc-721-non-fungible-token-standard/">ERC-721 Non-Fungible Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/erc-20-token-standard/">ERC-20 Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/develop-your-erc-20-token-explained%21/">Develop your ERC-20 Token‚Ää‚Äî‚Ääexplained!</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/gamifying-crypto-assets-with-the-erc998-composabl/">Gamifying Crypto Assets with the ERC998 Composables Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/erc-20-and-its-discontents--the-rise-of-comrades-/">ERC-20 and Its Discontents  The Rise of Comrades ERC-777 & ERC-1820</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/creating-a-dapp-in-go-with-geth/">Creating a DApp in Go with Geth</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/smart-contracts-integration-with-nethereum/">Smart contracts integration with Nethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/signing-messages-with-nethereum/">Signing messages with Nethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/managing-nonces-with-nethereum/">Managing nonces with Nethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20Started/connecting-to-an-ethereum-client-with-java-eclips/">Connecting to an Ethereum client with Java, Eclipse and Web3j</a></li>
</ul></li>
    <li class="toctree-l2 current"><button class="section nav-item">Privacy</button>
<ul class="subnav">
    <li class="toctree-l3"><a class="nav-item" href="../introduction-to-cryptography/">Introduction to Cryptography</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../building-on-bulletproofs-short-proofs-for-confide/">Building on Bulletproofs - Short Proofs for Confidential Transactions</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../enigma-protocol/">Enigma Protocol</a></li>
    <li class="toctree-l3 current"><a class="nav-item current" href="./">How to Code Your Own Confidential Token on Ethereum</a>
<ul class="subnav">
<li class="toctree-l4"><a class="nav-item toc" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#mental-models">Mental Models</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#the-protocol">The Protocol</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#notes">Notes</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#lets-do-it">Let‚Äôs Do It</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#create-notes">Create Notes</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#create-dem-proofs">Create Dem Proofs</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#approve">Approve</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#transfer">Transfer</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#caveats">Caveats</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#packages">Packages</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#wrap-up">Wrap-Up</a></li>
</ul></li>
    <li class="toctree-l3"><a class="nav-item" href="../data-privacy-with-the-nucypher-network/">Data Privacy with the NuCypher Network</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../nucypher-pyumbral/">NuCypher - PyUmbral</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../nightfall-private-token-and-nft-transfers-on-ethe/">Nightfall - Private Token and NFT Transfers on Ethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../privacy-with-pantheon-ethereum-java-client/">Privacy with Pantheon Ethereum Java Client</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../parity-private-transactions/">Parity - Private Transactions</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../introducing-beam%21/">Introducing Beam!</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../a-short-history-of-mimblewimble--from-hogwarts-to/">A Short History of Mimblewimble  From Hogwarts to Mobile Wallets</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../why-beam-is-sound-money/">Why Beam is Sound Money</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../introduction-to-mimblewimble-and-grin/">Introduction to MimbleWimble and Grin</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../a-beginner-s-guide-to-zcash/">A beginner‚Äôs guide to Zcash</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../a-beginner-s-guide-to-monero/">A beginner‚Äôs guide to Monero</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Open Finance (DeFi)</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/kyber-network--on-chain-liquidity-protocol/">Kyber Network  On-chain liquidity protocol</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/compound--money-markets-on-ethereum/">Compound  Money markets on Ethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/0x--peer-to-peer-exchange-protocol/">0x  Peer-to-peer exchange protocol</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/makerdao--decentralized-stablecoin-and-collateral/">MakerDAO  Decentralized stablecoin and collateral loans</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/uniswap--protocol-for-automated-token-exchange/">Uniswap  Protocol for automated token exchange</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/set-protocol--baskets-of-tokenized-assets/">Set Protocol  Baskets of tokenized assets</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/an-introduction-to-bonding-curves/">An Introduction to Bonding Curves</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Open%20Finance%20%28DeFi%29/incentivizing-high-quality-curation-with-a-token-/">Incentivizing high-quality curation with a Token-Curated Registry</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">DevOps</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../DevOps/lint-your-solidity-contracts-with-solhint/">Lint your Solidity contracts with Solhint</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../DevOps/lint-your-solidity-contracts-with-ethlint/">Lint your Solidity contracts with Ethlint</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../DevOps/truffle--testing-your-smart-contract/">Truffle  Testing your smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../DevOps/truffle-101-development-tools-for-smart-contracts/">Truffle 101 - Development Tools for Smart Contracts</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../DevOps/analyze-solidity-smart-contracts-with-slither/">Analyze Solidity Smart Contracts with Slither</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">SecureETH</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../SecureETH/system-description-document/">System Description Document</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../SecureETH/secureth-guidelines-getting-started/">SecurEth Guidelines - Getting Started</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../SecureETH/secureth-guidelines-introduction/">SecurEth Guidelines Introduction</a></li>
</ul></li>
</ul></li>
                </ul>
            </nav>
            <div class="repo">
    <div class="previous"><a href="../enigma-protocol/">&laquo; Previous</a></div>
    <div class="next"><a href="../data-privacy-with-the-nucypher-network/">Next &raquo;</a></div>
</div>
        </aside>
        <div id="spacer"><button class="arrow"></button></div>
        <main>
            <div class="home-top">
                <button class="hamburger"></button>
                <a href="../../.." class="site-name"> archive.kauri.io</a>
            </div>
            <div id="main">
                <nav class="breadcrumbs">
<ul>
    <li>Collections &raquo; </li><li>Privacy</li>
</ul>
</nav>
                <div id="content"><h1 id="how-to-code-your-own-confidential-token-on-ethereum">How to Code Your Own Confidential Token on Ethereum</h1>
<p><img alt="" src="https://ipfs.infura.io/ipfs/Qmb6Mn3BQcbi4qMZUXrGeAqNqRd8j2hkTKvhnRtcaWC1ZL" /></p>
<blockquote>
<p>an efficient zero-knowledge privacy protocol to enable private transactions aztec powers real world financial applications on ethereum mainnet today</p>
</blockquote>
<p>This article originally appeared on the <a href="https://medium.com/aztec-protocol/how-to-code-your-own-confidential-token-on-ethereum-4a8c045c8651">Aztec Protocol blog</a></p>
<p>Ethereum is not private. Every time you transfer an ERC20 token or any other digital asset, information is leaked to third parties. They could find out your full financial history simply by heading to Etherscan, Blockscout or any other blockchain explorer out there.
Fear not, there are ways to prevent this. For one, you could use multiple accounts, but you‚Äôd have to constantly remember not to cross-link these accounts. This would be a life admin nightmare. What if there was a more elegant and programmable way?
Let me introduce AZTEC: a privacy protocol built on top of Ethereum. In this article, I will not emphasise on the cryptography underpinning the protocol, but rather on its practical applications such as developing confidential tokens.
Disclaimer: I‚Äôm working at AZTEC as a full-time software engineer.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>I will further assume that you have a basic understanding of:</p>
<ul>
<li>
<p>Ethereum development using the <a href="https://truffleframework.com/">Truffle Framework</a> </p>
</li>
<li>
<p><a href="https://ethresear.ch/t/zero-knowledge-proofs-starter-pack/4519">Zero-knowledge proofs</a> </p>
</li>
<li>
<p>Cryptography and elliptic curves
Make sure you have node.js and npm on your machine and install Truffle:</p>
</li>
</ul>
<pre><code>$ npm install truffle --global
</code></pre>
<h3 id="mental-models">Mental Models</h3>
<p>Let‚Äôs pause for a moment and grasp the core technical concepts.</p>
<h3 id="the-protocol">The Protocol</h3>
<p>Ethereum is a 
<strong>country</strong>
 and AZTEC is a 
<strong>forest</strong>
 .
In this country, people interact, do finance on dApps, move to different cities (wallets) and so forth. I like to think about AZTEC as a quiet woodland confined within the geography of the country. People can go there, declare their balance before stepping in, but after that transactions are confidential.
The stock picture below represents my (silly) attempt to portray the idea of fading into AZTEC. It‚Äôs crystal clear what‚Äôs going on in the normal environment (Ethereum), but the state of the world after one crosses the arch is fuzzy and concealed by the forest (AZTEC).</p>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmWYb1F5CisH7DcSuzFTv1Mb1137G2Qoj3u8XtXqDTNqW5" /></p>
<h3 id="notes">Notes</h3>
<p>An AZTEC note is a first-class citizen and core primitive of the protocol. When you transact in zero-knowledge, smart contracts do NOT store any balances, but instead work with elliptic curve points, which are just computational noise to anyone who doesn‚Äôt have the private keys.
It is very important to make a distinction between ERC20 and 
<a href="https://github.com/ethereum/EIPs/issues/1724">ERC1724</a>
 ‚Äî AZTEC‚Äôs confidential token standard. The former stores a 
<a href="https://ethereum.stackexchange.com/questions/58203/storing-millions-of-values-in-mapping-variable/58204#58204">mapping between Ethereum addresses and unencrypted balances</a>
 . The latter does encrypt the balances. I like to compare AZTEC notes with 
<strong>Bitcoin UTXOs</strong>
 , as the process of spending notes on AZTEC is very much similar.</p>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmT1o6LSDCSU24UkY4g2APMp3UZB4afiM2VsgXMQimyTHg" /></p>
<p>The contents of a note, classified by their visibility:</p>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmTrsPi6PX2dsJzZbfxGhBmGfqbek1KsQR66LeHHuVCfXj" /></p>
<p>We‚Äôre optimising for speed, so we stop with the fancy cryptography here. If you‚Äôre hungry for more, check out our 
<a href="https://github.com/AztecProtocol/AZTEC/blob/master/AZTEC.pdf">white paper</a>
 .</p>
<p><strong>Before continuing though, do note that AZTEC needs a trusted setup. This tutorial uses a trusted setup that was generated by our team internally. We will be releasing more information about the production trusted setup generation in the near future. Use at own risk.</strong></p>
<h3 id="lets-do-it">Let‚Äôs Do It</h3>
<p>Clone this 
<a href="https://github.com/PaulRBerg/confidential-tokens">repo</a>
 and install the node modules:</p>
<pre><code>$ git clone git@github.com:PaulRBerg/confidential-tokens.git
$ cd confidential-tokens
$ npm install
</code></pre>
<p>If you get a lot of verbose logs related to ‚Äúscrypt‚Äù and ‚Äúkeccak‚Äù, that‚Äôs perfectly fine because we require 
<code>aztec.js</code>
 which requires 
<code>web3.js</code>
 which subsequently has many cryptographic dependencies.
Before actually running the demo, there‚Äôs a few important steps to do:</p>
<ul>
<li>
<p>Create an <code>accounts.js</code> file inside the <code>src</code> folder. Only set <strong>two</strong> accounts. There is an example file called <code>accounts.js.example</code> .</p>
</li>
<li>
<p>Create a <code>.env</code> file at the root of the project and fill it with the properties below. Again, there is an example file called <code>.env.example</code> .</p>
</li>
<li>
<p>Deploy the confidential token contract to Rinkeby. You can use Truffle to do this:</p>
</li>
</ul>
<pre><code>$ truffle migrate --network rinkeby
</code></pre>
<p>Environment variables:</p>
<ul>
<li>
<p><a href="https://truffleframework.com/docs/truffle/reference/truffle-commands#networks">CONFIDENTIAL_TOKEN_ADDRESS</a> : note that the actual contract name is ZKERC20, get this after truffle deploys the contract</p>
</li>
<li>
<p><a href="https://support.mycrypto.com/private-keys-passwords/how-do-mnemonic-phrases-work.html">MNEMONIC</a> </p>
</li>
<li>
<p><a href="https://infura.io/">INFURA_API_KEY</a> 
Now, check that your project looks like this:</p>
</li>
</ul>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmSRAEwZu3Hz5gyRHwW6aq7g5KWHSdkMV2zCT9GRq9JeJ1" /></p>
<p>Run the demo:</p>
<pre><code>$ npm run demo
</code></pre>
<p>This is going to take a while, because transactions are sent to Rinkeby. After a few minutes, you should have a list of receipts printed in the console. Hooray, you just performed your first confidential token transfer on Ethereum!
Now, let‚Äôs go through the source code in 
<code>src/demo.js</code>
 .</p>
<h3 id="create-notes">Create Notes</h3>
<pre><code>aztecAccounts = [...new Array(2)].map(() =&gt; aztec.secp256k1.generateAccount());
  notes = [
    aztec.note.create(aztecAccounts[0].publicKey, 5),
    aztec.note.create(aztecAccounts[0].publicKey, 5),
    aztec.note.create(aztecAccounts[1].publicKey, 8),
    aztec.note.create(aztecAccounts[0].publicKey, 2)
  ];
</code></pre>
<p>Steps:</p>
<ul>
<li>
<p>Generate a bunch of random accounts. We have to use ‚Äúsecp256k1‚Äù because AZTEC needs the accounts‚Äô public keys, not just their addresses.</p>
</li>
<li>
<p>Create 4 notes, with the first two belonging to the first account and the last two giving 8 tokens from the initial total amount (10) to the second account.
To better understand step 2, recall that AZTEC notes are similar in nature with Bitcoin UTXOs. When one transfers money, the leftover sums have to be converted into a new set of notes ‚Äî this is by contrast to Ethereum canonical transactions, which use a balance model.
Also, I separated the accounts used in Ethereum (the ones in 
<code>src/accounts.js</code>
 ) from the randomly generated AZTEC accounts (the demo script generates a file called 
<code>aztecAccounts.json</code>
 ).</p>
</li>
</ul>
<h3 id="create-dem-proofs">Create Dem Proofs</h3>
<pre><code>proofs[0] = aztec.proof.joinSplit.encodeJoinSplitTransaction({
    inputNotes: [],
    outputNotes: notes.slice(0, 2),
    senderAddress: accounts[0].address,
    inputNoteOwners: [],
    publicOwner: accounts[0].address,
    kPublic: -10,
    aztecAddress: joinSplit.options.address,
  });
</code></pre>
<p>The proof object above:</p>
<ul>
<li>
<p>Attests that <code>publicOwner</code> is happy to transfer 10 <strong>public</strong> ERC20 tokens into AZTEC form</p>
</li>
<li>
<p>Makes the first randomly generated AZTEC account the new owner (recall that the first two notes are worth 5 tokens each and are both owned by that AZTEC account)</p>
</li>
</ul>
<pre><code>proofs[1] = aztec.proof.joinSplit.encodeJoinSplitTransaction({
    inputNotes: notes.slice(0, 2),
    outputNotes: notes.slice(2, 4),
    senderAddress: accounts[0].address,
    inputNoteOwners: [aztecAccounts[0], aztecAccounts[0]],
    publicOwner: accounts[0].address,
    kPublic: 0,
    aztecAddress: joinSplit.options.address,
  });
</code></pre>
<p>The second proof:</p>
<ul>
<li>
<p>Transfers 8 tokens to the second AZTEC account in <strong>fully-fledged zero-knowledge</strong> form</p>
</li>
<li>
<p>Burns the first two input notes so that the first AZTEC account cannot reuse them in the future</p>
</li>
</ul>
<pre><code>proofOutputs = proofs.map(({ expectedOutput }) =&gt; {
    return aztec.abiEncoder.outputCoder.getProofOutput(expectedOutput, 0);
  });
  proofHashes = proofOutputs.map(proofOutput =&gt; {
    return aztec.abiEncoder.outputCoder.hashProofOutput(proofOutput);
  });
</code></pre>
<p>We need the above to interact with a contract named ‚ÄúNoteRegistry‚Äù, which is unique to every confidential token contract. You can think of 
<code>proofHashes</code>
 as an array of unique identifiers for the previously generated proofs.</p>
<h3 id="approve">Approve</h3>
<pre><code>for (let i = 0; i &lt; accounts.length; ++i) {
    const data = erc20Mintable
      .methods
      .approve(noteRegistry.options.address, scalingFactor.mul(tokensTransferred).toString(10))
      .encodeABI();
    await sendTx({
      from: accounts[i].address,
      to: aztecAddresses.erc20Mintable,
      data: data,
      privateKey: accounts[i].privateKey,
    });
  }
</code></pre>
<p>We mint a bunch of tokens and grant the NoteRegistry permission to spend from the ERC20 contract.</p>
<pre><code>const delta = 10;
  let data = noteRegistry
    .methods
    .publicApprove(proofHashes[0], delta)
    .encodeABI();
  await sendTx({
    from: accounts[0].address,
    to: noteRegistry.options.address,
    data: data,
    privateKey: accounts[0].privateKey,
  });
</code></pre>
<p>Just like ERC20, NoteRegistry needs to be granted permission to work with AZTEC proofs. We confess that this is an area of active research and we‚Äôre investigating ways of making the development UX smoother.</p>
<h3 id="transfer">Transfer</h3>
<pre><code>let data = confidentialToken
    .methods
    .confidentialTransfer(proofs[0].proofData)
    .encodeABI();
  await sendTx({
    from: accounts[0].address,
    to: confidentialToken.options.address,
    data: data,
    privateKey: accounts[0].privateKey,
  });
</code></pre>
<pre><code>  data = confidentialToken
    .methods
    .confidentialTransfer(proofs[1].proofData)
    .encodeABI();
  await sendTx({
    from: accounts[0].address,
    to: confidentialToken.options.address,
    data: data,
    privateKey: accounts[0].privateKey,
  });
</code></pre>
<p>Finally, the fun part: call the confidential token contract to make the transfers. Note that the first transaction only converts the ERC20 tokens, so third parties can find out how many tokens were transferred. However, the second transaction is fully confidential.
Here‚Äôs a mindmap for what we just did:</p>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmbYNeBtdUdFcekUtRJoaf9NegvP8RhseGUickKbXzpfQK" /></p>
<h3 id="caveats">Caveats</h3>
<ul>
<li>
<p>This tutorial uses a trusted setup that was generated by our team internally. We will be releasing more information about the production trusted setup generation in the near future. Use at own risk.</p>
</li>
<li>
<p>There‚Äôs a ton of pre-approvals required before the confidential transfers can be triggered. As previously mentioned, this is something we‚Äôre looking forward to improving.</p>
</li>
<li>
<p>The AZTEC codebase may go through multiple breaking changes after this article is published. Fear not though, this tutorial uses <a href="https://teamtreehouse.com/community/why-install-npm-packages-as-saveexact">exact versions</a> of npm packages to prevent disruption.</p>
</li>
<li>
<p>AZTEC uses <a href="https://solidity.readthedocs.io/en/v0.4.24/">Solidity 0.4.24</a> , so you must use a compatible version of OpenZeppelin, that is <a href="https://github.com/OpenZeppelin/openzeppelin-solidity/releases/tag/v2.0.0">2.0.0</a> </p>
</li>
<li>
<p>When the AZTEC contracts have only one user, confidentiality is leaked. Third parties can infer how much money is deposited due to ERC20‚Äôs public nature ‚Äî they can compare that against the total amount held by the contract. The more users join, the more confidentiality there is.</p>
</li>
</ul>
<h3 id="packages">Packages</h3>
<p>Here‚Äôs an exhaustive list of AZTEC goodies we used:</p>
<ul>
<li>
<p><a href="https://github.com/AztecProtocol/AZTEC/tree/master/packages/aztec.js">aztec.js</a> </p>
</li>
<li>
<p><a href="https://github.com/AztecProtocol/AZTEC/tree/master/packages/contract-addresses">@aztec/contract-addresses</a> </p>
</li>
<li>
<p><a href="https://github.com/AztecProtocol/AZTEC/tree/master/packages/contract-artifacts">@aztec/contract-artifacts</a> </p>
</li>
<li>
<p><a href="https://github.com/AztecProtocol/AZTEC/tree/master/packages/dev-utils">@aztec/dev-utils</a> </p>
</li>
<li>
<p><a href="https://github.com/AztecProtocol/AZTEC/tree/master/packages/protocol">@aztec/protocol</a> 
The source code for all of them is available in our 
<a href="https://github.com/AztecProtocol/AZTEC">monorepo</a>
 . Feel free to reach out on 
<a href="https://twitter.com/aztecprotocol">Twitter</a>
 or email at hello@aztecprotocol.com if you have any questions!</p>
</li>
</ul>
<h3 id="wrap-up">Wrap-Up</h3>
<p>I hope you enjoyed this tutorial and you‚Äôre as excited about confidential transactions as I am. Check out these transactions which use a couple of AZTEC proofs to convert 10 ERC20 tokens into fully-fledged zero-knowledge form:</p>
<ul>
<li>
<p><a href="https://rinkeby.etherscan.io/tx/0x85ab17ab8290bad0d91501083c571a63e8715a0d425828df4c0b36accb11d077">https://rinkeby.etherscan.io/tx/0x85ab17ab8290bad0d91501083c571a63e8715a0d425828df4c0b36accb11d077</a> </p>
</li>
<li>
<p><a href="https://rinkeby.etherscan.io/tx/0xf5dbaf357e09abf2d4151974bdfae5e20317043b155ff653b03fbd137c940a84">https://rinkeby.etherscan.io/tx/0xf5dbaf357e09abf2d4151974bdfae5e20317043b155ff653b03fbd137c940a84</a> 
Many thanks to 
<a href="https://medium.com/@aztecprotocol">Zac</a>
 , 
<a href="https://medium.com/@arnaudschenk">Arnaud S.</a>
 and 
<a href="https://medium.com/@thomas.waite4">Tom Waite</a>
 for their input and feedback.
Find me on 
<a href="https://twitter.com/PaulRBerg">Twitter</a>
 or 
<a href="https://keybase.io/PaulRBerg">Keybase</a>
 if you want to chat.</p>
</li>
</ul>
<hr />
<ul>
<li><strong>Kauri original title:</strong> How to Code Your Own Confidential Token on Ethereum</li>
<li><strong>Kauri original link:</strong> https://kauri.io/how-to-code-your-own-confidential-token-on-ethereu/b699361c8f7b4671aca588f1213e87bd/a</li>
<li><strong>Kauri original author:</strong> Kauri Team (@kauri)</li>
<li><strong>Kauri original Publication date:</strong> 2019-04-17</li>
<li><strong>Kauri original tags:</strong> privacy, aztec, zero-knowledge-proofs, confidential-transactions</li>
<li><strong>Kauri original hash:</strong> QmVQq8KALURS87KVjrx4DHwRbEEQPGdzXGpMgTrWWUxvfr</li>
<li><strong>Kauri original checkpoint:</strong> Qmekp5iiDi5N5M4KdtAVGBEJEF3ahMgWYZJqL7s1qmkQ9g</li>
</ul></div>
                <footer>
    <div class="footer-buttons">
        <div class="previous"><a href="../enigma-protocol/" title="Enigma Protocol"><span>Previous</span></a></div>
        <div class="next"><a href="../data-privacy-with-the-nucypher-network/" title="Data Privacy with the NuCypher Network"><span>Next</span></a></div>
    </div>
    <div class="footer-note">
        <p>
            Built with <a href="http://www.mkdocs.org">MkDocs</a> using
            <a href="https://github.com/daizutabi/mkdocs-ivory">Ivory theme</a>.
        </p>
    </div>
</footer>
            </div>
        </main>
    </div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js"></script>
    <script src="../../../search/main.js"></script>
</body>

</html>